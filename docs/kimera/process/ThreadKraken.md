# Module `kimera.process.ThreadKraken`

Lightweight registry for cooperative background threads with shared state.

## `ThreadKraken`

### Constructor
Initialises:
- `threads`: name → `threading.Thread`
- `blackboard`: dictionary for cross-thread data exchange.
- `lock`: ensures blackboard writes are serialised.
- `stop_flags`: name → `threading.Event` controlling shutdown.

### `register_thread(self, target, name, *args, **kwargs)`
Registers a new daemon thread but does **not** start it. The `target` callable receives `(stop_flag, *args, **kwargs)` so it can honour cooperative cancellation.

### `start_threads(self)`
Starts every registered thread.

### `start_thread(self, name)`
Starts a single named thread if present.

### `stop_thread(self, name)`
Sets the named stop flag, joins the thread for up to ~2 s, and removes it from the registries.

### `stop_all_threads(self)`
Signals and joins every registered thread, then clears both `threads` and `stop_flags`.

### `write_blackboard(self, key, value)`
Stores `value` under `key` in the shared blackboard using `self.lock` for thread-safety.

### `read_blackboard(self, key)`
Returns the value previously written to `blackboard` or `None` if missing.

### `add_blackboard_listener(self, condition, callback, check_interval=1)`
Spawns a daemon listener thread that polls `condition()` every `check_interval` seconds until it returns `True` or the stop flag is set. When triggered, invokes `callback()`. Returns the autogenerated thread name (e.g., `Listener-0`).
